# AB_TEST_PROJECT
Используя данные интернет-магазина приоритезировать гипотезы, произвести оценку результатов A/B-тестирования различными методами

Основные навыки и инструменты: Python, Pandas, Matplotlib, SciPy, A/B-тестирование, проверка статистических гипотез

Что проведено: 
- приоритизация гипотез по фреймворкам ICE и RICE
- анализ результатов A/B-теста
- построение графиков кумулятивной выручки, среднего чека, конверсии по группам,
- подсчет статистическую значимость различий конверсий и средних чеков по сырым и очищенным данным.
- принятие рещения о целесообразности / нецелесообразности дальнейшего проведения теста.

Самостоятельные выводы по проекту:

**Общие данные**:

- Для проведения теста recommender_system_test были сформированы 2 группы: 'A' 'B'
- Периодом тестирования после чистки выступили данные о пользователях, зарегистрированных с 2020-12-07 по 2020-12-16
- Периодом тестирования выступили данные о событиях, собранных с **2020-12-07 по 2020-12-30**. Были удалены все события, которые совершались пользователем после 14 дня с момента регистрации
- **Количество** таких **пользователей, участвующих в тестировании, сократилось с 6701 до 4 086. Из них 2169 не совершили ни одного события**
Согласно имеющимся данным прослеживается **следующий порядок действий в системе**:
  •   вход в систему - 46%
  •   просмотр карточек товаров - 27,7%
  •   просмотры корзины - 13,3%
  •   покупки - 13%
- До последнего шага с шага авторизации доходят только 29% пользователей.

- Только 46.9% пользователей из числа зарегистрировавшихся авторизуются в системе, и только ~ 14% от всех зарегистрировавшихся доходят до покупки
- Если смотреть на картину, не обращая внимание на пользователей без событий, то конверсия в покупки выше на 16.5 процентных пункта - однако **только через призму безсобытийных клиентов можно понять, что проблема с конверсией возникает раньше, на этапе перехода от регистрации к авторизации в системе**. Рекомендации: дело второстепенное.

**Распределение событий на пользователя**:

- 75% значений лежит в диапазоне до 6 событий на пользователя,
- максимальное количество событий равно 24. 95 и 99 перцентили равны 12 и 16 событиям соответственно.
- Пользователей без событий больше в группе В, так как при делении на группы медиана группы А сместилась вправо с 0 до 3-х событий при среднем, равном 3.8 (стремящееся к 4 событиям на пользователя). 99% значений лежит в диапазоне до 18 событий. Медиана группы В продолжает равняться 0 при среднем, равном 2 событиям. 99% значений лежит в диапазоне до 13 событий.
- Без учета пользователей с отсутствующими событиями, медиана в группах выровнялась до 6 событий на пользователя при среднем, стремящемся в группе А к 7, и в группе В к 6. Выровнилось и распределение и границы аномальных значений.

**Распределение событий в группах по датам**:

- с 7 по 13 декабря по плотности распределения событий лидировала группа В (в первые 4 дня плотность была в 2 раза выше, чем в группе А)
- 14 декабря по 16 декабря плотность распределения событий на порядок выше у группы А, далее у обеих групп наблюдается спад и до окончания теста мы видим, что плотность распределения по событиям +- равномерное, смещенное в пользу группы А.

**На что удалось обратить внимание:**

самое уязвимое место всего магазина - это то, что клиент на первых шагах не заинтересован в работе с системой. Об этом говорит:
- регистраций в 2 раза больше, чем авторизаций (как-будто заставляли делать это за 'плюшку' без правила "предоставляется после оформления первого заказа)
- чуть более 1/3 пользователей после авторизации даже не просматривают каталог, чтобы оформить заказ.
- только 1/2 от тех, кто просматривал каталог заинтересовались в покупке. Значит остальных что-то не устроило: цена/ ассортимент/ интерфейс --> неудобство (не имеем возможности оценить, так как набор данных ограничен)

**На что необходимо обратить внимание организаторам теста**:

A/B тест мы провели как учетом тех, кто не совершал событий, так и без них.
- Это нам позволяет сделать расчет выборки по Эвану Миллеру. Потому что даже, если оценить минимальную конверсию в группе А 30% с приростом в 10% (как указано в ТЗ) размер каждой выборки при мощности 80 и альфе равной .05 не превышает 331 уникального пользователя для каждой из групп. При меньшем проценте baseline требуется еще более меньшая выборка. Для проведения данного теста нам вообще можно было оставить 1000 значений в совокупности для двух групп, однако и по ТЗ требовалось 6 тыс. и правильно всё же обратить во время теста внимание на дополнительные проблемы (в том числе на низкую долю авторизаций после регистрации)
- Мы оставили пользователей, которые прожили не менее 14 дней, при этом удалили из итоговой таблицу все события пользователей, если они были совершены далее чем на 14 день с момента регистрации. При этом анализ лайфтайма активных клиентов показал, что 75% активных пользователей проявляют активность до 9 дней. И возможно, данного промежутка было бы достаточно. Но мы следователи ТЗ и не хотели допускать ошибку подглядывания, решили не допускать ситуации ранней остановки теста.
- Мы приняли во внимание тот факт, что к концу набора данных для тестирования с 25 декабря проводилась маркетинговая акция, и в реальных условиях это стало бы причиной переноса теста. Мы ограничили набор пользователей 16 декабря. При этом помним, что 75% значений лайфтайма активного пользователя лежит в диапазоне до 9 дней. Следовательно, к началу маркетинговой акции вся основная активность большинства пользователей завершилась.
- Мы заметили, что есть пересечения с конкурирующим тестом. Однако распределение в группах +- равномерное. Мы не удаляли данных пользователей. Мы видим, что пользователи, участвующие в 2-х тестах одновременно, могут:
 •  принадлежать как одной группе в разных тестах, например АА, ВВ
 •  относиться к двум разным группам в тестах, например АВ, ВА - таких пользователей 504. Такое разночтение в группах может исказить результаты теста.

**Рекомендуем провести тест повторно на новых данных, новых группах, с проверкой корректности собранных данных заранее или с учетом корректировки ТЗ**.

**Оценка результатов А/В теста**

- Так как согласно технического задания ожидаемый эффект, заключается в том, что за 14 дней с момента регистрации в системе пользователи покажут улучшение каждой метрики не менее, чем на 10%. Стоит отметить, что внедрение улучшенной рекомендательной системы не повлияло на улучшение конверсии в группе новой платежной воронки по отношению к контрольной группе.
- При проверке гипотез на данных с учетом пользователей без событий, конверсия не только не улучшилась, она ухудшилась по сравнению с конверсией группы А на каждом из этапов событий
- При проверке гипотез на данных без учета несобытийных пользователей, внедрение улучшенной рекомендательной системы не повлияло на улучшение конверсии при в группе новой платежной воронки по отношению к контрольной группе.
- Конверсия ухудшилась более чем на 9% для типа событий "Просмотр продуктовых карточек".
- Для типов событий "Просмотр корзины" и "Покупка" конверсии групп А и В значимо не различаются.

**Рекомендации по итогам А/В теста**
- планировать тестирование необходимо заранее, оценивая все факторы, которые могут на него повлиять.
- Нельзя ориентироваться на проведение теста во время новогодних праздников, так как это только исказит результаты, случайно повысит конверсию (увеличится число заказов) или наоборот после праздников пойдет спад активности в каникулы, так как большинство совершили покупки в прошлом году. Имеет смысл набирать группы в текущих период только если сам ожидаемый эффект зависит от необходимости взять именно этот период, так как никакой другой не подходит
- Нужно заранее в ТЗ обозначать, почему проводится два теста одновременно. Заложено ли пересечение групп изначально.
- Для аналитика на данном этапе не помешал бы консультант по техническому заданию.
- Предоставленные данные еще на этапе предобработки данных и оценки корректности я бы сочла не пригодными для проведения теста. Слишком много затрат неизвестных при том, что любой такой тест стоит бизнесу денег.
